parameters:
    # cors_allowed_origins: ["http://localhost:3000"]

services:
    _defaults:
        autowire: true
        autoconfigure: true

    App\:
        resource: "../src/"
        exclude:
            - "../src/DependencyInjection/"
            - "../src/Entity/"
            - "../src/Kernel.php"

    App\EventSubscriber\CorsSubscriber:
        arguments:
            $allowedOrigins: "%cors_allowed_origins%"
        tags:
            - { name: kernel.event_subscriber }

    # ✅ Report factory (alias interfejsu do implementacji)
    App\Report\Contracts\ReportFactoryInterface:
        alias: App\Report\Factory\DompdfReportFactory
        public: false

    # ✅ XLSX builder (alias interfejsu do implementacji)
    App\Report\Xlsx\Contracts\ContractorsXlsxBuilderInterface:
        alias: App\Report\Xlsx\Contracts\ContractorsXlsxBuilder
        public: false

    # ✅ Wymuś rejestrację serwisu dla klasy (jeśli z jakiegoś powodu nie łapie z App\:)
    App\Report\Xlsx\Contracts\ContractorsXlsxBuilder:
        autowire: true
        autoconfigure: true
        public: false
